function getAmount(a){return Math.round(nTotalPurse*parseInt(a)/100)}function determineAvailable(){nTotalPayout=0,$(".payout").each(function(){"season"==$(this).data("type")||"finalWeek"==$(this).data("type")?nTotalPayout+=parseInt($(this).val()):"weekly"==$(this).data("type")&&(nTotalPayout+=parseInt(18*$(this).val()))}),nAvailable=parseInt($("#nPurse").val())-nTotalPayout,$("#available").html(nAvailable),0>nAvailable?$(".allocated-too-much").removeClass("hide"):$(".allocated-too-much").addClass("hide")}function remindToSave(){$(".remind-to-save").removeClass("hide"),$(".save-all").removeClass("hide")}var nTotalPayout=0,nSubscriptions,nAvailable;docReady(function(){nSubscriptions=parseInt($("#nSubscriptions").html()),$(".container").on("click",".add-seasonPayout,.edit-seasonPayout",function(a){a.stopPropagation(),nPayoutID=0,$(this).hasClass("edit-seasonPayout")?window.location.href="/?action=seasonPayout.addEdit&nSeasonPayoutID="+$(this).siblings(".nSeasonPayoutID").val():window.location.href="/?action=seasonPayout.addEdit&bAddNew=true"}),$(".container").on("click",".delete-seasonPayout",function(a){a.stopPropagation(),confirm("Are you sure you would like to delete the seasonPayout")&&(window.location.href="/index.cfm?action=seasonPayout.delete&nSeasonPayoutID="+$(this).siblings(".nSeasonPayoutID").val())}),$(".container").on("click",".cancel",function(a){a.stopPropagation(),confirm("Are you sure you would like to cancel adding this season payout?")&&(window.location.href="/?action=seasonPayout.listing")}),$(".container").on("click",".save",function(){showError(),$("#addEditPayout").submit()}),$("#nPayoutID").on("change",function(){$("#nAmount").val(getAmount($(this).find(":selected").data("percent")))}),determineAvailable(),$(".increase,.decrease").on("click",function(){var a=0,t=parseInt($(this).closest("tr").find(".payout").val());a=t+parseInt($(this).hasClass("increase")?5:-5),$(this).closest("tr").find(".payout").val(a).addClass("updated"),determineAvailable(),remindToSave()}),$(".payout").on("focusout",function(){$(this).addClass("updated"),determineAvailable(),remindToSave()}),$(".save-all").on("click",function(){$(this).prop("disabled",!0).html("Saving..."),$(".payout.updated").each(function(){$.post("/index.cfm?action=seasonPayout.save",{nSeasonPayoutID:$(this).data("id"),nAmount:$(this).val(),bRedirect:!1})}),$(this).prop("disabled",!1).html("Save All"),$(".save-all,.remind-to-save").addClass("hide"),$(".saved").removeClass("hide"),setTimeout(function(){$(".saved").addClass("hide")},5e3),$(".payout.updated").removeClass("updated")})});
//# sourceMappingURL=maps/seasonPayout.min.js.map